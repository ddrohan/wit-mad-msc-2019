<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.10/semantic.min.css"
          type="text/css">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/railscasts.min.css"
          rel="stylesheet"/>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/jquery.address/1.6/jquery.address.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.10/semantic.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/java.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/kotlin.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <style>
      

body {
  font-family: "Open Sans", "Helvetica", "Helvetica Neue",  "Arial", sans-serif;
  font-size:90%;
  color: black;
}

p {
  margin: 0.5em;
}

pre code {
  font-family: "Monaco";
  font-size: 100%;
}

img {
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
  margin:10px;
}

h1, h2, h3 {
  border-bottom:thin solid black;
  margin-bottom: 0.5em;
  margin-top: 1em;
}

h1 {
  font-style:italic;
  font-size:130%;
}

h2 {
  font-size:110%;
}

h3 {
  font-size:100%;
}



      

html, body {
  height: 100%;
  margin: 0;
}
.wrapper {
  height: 100%;
  display: flex;
  flex-direction: column;
}
.footer {
  background: white;
  text-align: right;
}
.content {
  flex: 1;
  overflow: auto;
}



    </style>
  </head>

  
  

  <div class="ui fixed top pointing inverted stackable menu labmenu">
    <header class="header item">
      <i id="toc" class="sitemap icon"></i>
      
        <a href="../../index.html"> UI Design & App Structure  </a>
      
    </header>
    <div class="right tab-menu menu">
      
        <a class="item" data-tab="Lab-02">
          Lab-02
        </a>
      
        <a class="item" data-tab="01">
          01
        </a>
      
        <a class="item" data-tab="02">
          02
        </a>
      
        <a class="item" data-tab="03">
          03
        </a>
      
        <a class="item" data-tab="04">
          04
        </a>
      
        <a class="item" data-tab="05">
          05
        </a>
      
        <a class="item" data-tab="06">
          06
        </a>
      
        <a class="item" data-tab="07">
          07
        </a>
      
        <a class="item" data-tab="Exercises">
          Exercises
        </a>
      
    </div>
  </div>


  

  <div class="ui pushable">
    <div class="ui inverted labeled icon left inline vertical sidebar menu">
      <br><br>
      
        
          
            <a class="item"
               href="http://ddrohan.github.io/wit-mad-msc-2019//topic01-overview-and-tools/unit-1/book-ahelloworld-lab-01/index.html">HelloWorld </a>
          
        
      
        
          
            <a class="item"
               href="http://ddrohan.github.io/wit-mad-msc-2019//topic01-overview-and-tools/unit-1/book-coffeemate-lab-01/index.html">Lab-01 </a>
          
        
      
        
          
            <a class="item"
               href="http://ddrohan.github.io/wit-mad-msc-2019//topic02-ui-design/unit-1/book-coffeemate-lab-02/index.html">Lab-02 </a>
          
        
      
        
          
            <a class="item"
               href="http://ddrohan.github.io/wit-mad-msc-2019//topic02-ui-design/unit-1/book-coffeemate-lab-03/index.html">Lab-03 </a>
          
        
      
        
          
            <a class="item"
               href="http://ddrohan.github.io/wit-mad-msc-2019//topic02-ui-design/unit-2/book-coffeemate-lab-04/index.html">Lab-04 </a>
          
        
      
        
          
            <a class="item"
               href="http://ddrohan.github.io/wit-mad-msc-2019//topic03-persistence/unit-1/book-coffeemate-lab-05-a/index.html">Lab-05-a </a>
          
        
      
        
          
            <a class="item"
               href="http://ddrohan.github.io/wit-mad-msc-2019//topic03-persistence/unit-1/book-coffeemate-lab-05-b/index.html">Lab-05-b </a>
          
        
      
        
          
            <a class="item"
               href="http://ddrohan.github.io/wit-mad-msc-2019//topic04-networking/unit-1/book-coffeemate-lab-06-a/index.html">Lab-06-a </a>
          
        
      
        
          
            <a class="item"
               href="http://ddrohan.github.io/wit-mad-msc-2019//topic04-networking/unit-1/book-coffeemate-lab-06-b/index.html">Lab-06-b </a>
          
        
      
        
          
            <a class="item"
               href="http://ddrohan.github.io/wit-mad-msc-2019//topic05-google-services/unit-1/book-coffeemate-lab-07/index.html">Lab-07 </a>
          
        
      
        
          
            <a class="item"
               href="http://ddrohan.github.io/wit-mad-msc-2019//topic05-google-services/unit-1/book-coffeemate-lab-08/index.html">Lab-08 </a>
          
        
      
    </div>
    <div class="pusher" tabindex="-1">
      <div class="ui basic segment">
        <br>
        
          <div class="ui tab segment lab" data-tab="Lab-02">
            <h1>Objectives</h1>
<p>In this Lab, <b>CoffeeMate.2.0</b> we will build on the previous lab and add in some new features and UI Design. On completion of this lab you&#39;ll be able to use Bundles, Custom Layouts, Custom Adapters and Fragments.</p>

          </div>
        
          <div class="ui tab segment lab" data-tab="01">
            <h1>Setup - Starter Code</h1>
<p>To complete this lab you can either continue on with your solution from Lab 01 (CoffeeMate.1.0) or download the previous solution here <a href="archives/CoffeeMate.2.0.Starter.zip">CoffeeMate.2.0.Starter</a></p>
<p>To open this in Android Studio, first extract the archive somewhere on your hard drive and select &#39;File-&gt;Open&#39; etc.</p>
<p>Once you open/import the <b>CoffeeMate.2.0</b> Project you&#39;ll probably need to &#39;Clean &amp; Build&#39; the project to fix any residual errors.</p>
<p>Next, go ahead and create a new &#39;Edit&#39; Activity, with the following settings</p>
<p><img src="img/newedit.png" alt=""></p>
<p>Then, replace the default layout with this</p>
<pre><code class="lang-xml">&lt;TextView
        android:id=&quot;@+id/editBarTV&quot;
        android:layout_width=&quot;384dp&quot;
        android:layout_height=&quot;25dp&quot;
        android:layout_marginTop=&quot;104dp&quot;
        android:background=&quot;@color/colorPrimary&quot;
        android:paddingBottom=&quot;2dp&quot;
        android:text=&quot;@string/coffeeDetailsLbl&quot;
        android:textAlignment=&quot;center&quot;
        android:textColor=&quot;@color/colorFontWhite&quot;
        android:textSize=&quot;18sp&quot;
        app:layout_constraintEnd_toEndOf=&quot;parent&quot;
        app:layout_constraintHorizontal_bias=&quot;0.0&quot;
        app:layout_constraintStart_toStartOf=&quot;parent&quot;
        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;

    &lt;TextView
        android:id=&quot;@+id/editfooter&quot;
        android:layout_width=&quot;0dp&quot;
        android:layout_height=&quot;36dp&quot;
        android:background=&quot;@color/colorPrimary&quot;
        android:paddingTop=&quot;5dp&quot;
        android:text=&quot;@string/appWebsite&quot;
        android:textAlignment=&quot;center&quot;
        android:textColor=&quot;@color/colorFontWhite&quot;
        android:textSize=&quot;16sp&quot;
        android:textStyle=&quot;bold&quot;
        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;
        app:layout_constraintEnd_toEndOf=&quot;parent&quot;
        app:layout_constraintHorizontal_bias=&quot;0.523&quot;
        app:layout_constraintStart_toStartOf=&quot;parent&quot;
        app:layout_constraintTop_toTopOf=&quot;parent&quot;
        app:layout_constraintVertical_bias=&quot;1.0&quot; /&gt;

    &lt;TextView
        android:id=&quot;@+id/editPriceTV&quot;
        android:layout_width=&quot;99dp&quot;
        android:layout_height=&quot;43dp&quot;
        android:paddingTop=&quot;10dp&quot;
        android:text=&quot;@string/coffeePriceLbl&quot;
        android:textAlignment=&quot;textEnd&quot;
        android:textColor=&quot;@color/colorFontBlack&quot;
        android:textSize=&quot;18sp&quot;
        app:layout_constraintBottom_toTopOf=&quot;@+id/editfooter&quot;
        app:layout_constraintEnd_toEndOf=&quot;parent&quot;
        app:layout_constraintHorizontal_bias=&quot;0.056&quot;
        app:layout_constraintStart_toStartOf=&quot;parent&quot;
        app:layout_constraintTop_toTopOf=&quot;parent&quot;
        app:layout_constraintVertical_bias=&quot;0.613&quot; /&gt;

    &lt;TextView
        android:id=&quot;@+id/editShopTV&quot;
        android:layout_width=&quot;99dp&quot;
        android:layout_height=&quot;43dp&quot;
        android:paddingTop=&quot;10dp&quot;
        android:text=&quot;@string/coffeeShopLbl&quot;
        android:textAlignment=&quot;textEnd&quot;
        android:textColor=&quot;@color/colorFontBlack&quot;
        android:textSize=&quot;18sp&quot;
        app:layout_constraintBottom_toTopOf=&quot;@+id/editfooter&quot;
        app:layout_constraintEnd_toEndOf=&quot;parent&quot;
        app:layout_constraintHorizontal_bias=&quot;0.056&quot;
        app:layout_constraintStart_toStartOf=&quot;parent&quot;
        app:layout_constraintTop_toTopOf=&quot;parent&quot;
        app:layout_constraintVertical_bias=&quot;0.472&quot; /&gt;

    &lt;TextView
        android:id=&quot;@+id/editNameTV&quot;
        android:layout_width=&quot;99dp&quot;
        android:layout_height=&quot;43dp&quot;
        android:paddingTop=&quot;10dp&quot;
        android:text=&quot;@string/coffeeNameLbl&quot;
        android:textAlignment=&quot;textEnd&quot;
        android:textColor=&quot;@color/colorFontBlack&quot;
        android:textSize=&quot;18sp&quot;
        app:layout_constraintBottom_toTopOf=&quot;@+id/editfooter&quot;
        app:layout_constraintEnd_toEndOf=&quot;parent&quot;
        app:layout_constraintHorizontal_bias=&quot;0.056&quot;
        app:layout_constraintStart_toStartOf=&quot;parent&quot;
        app:layout_constraintTop_toTopOf=&quot;parent&quot;
        app:layout_constraintVertical_bias=&quot;0.344&quot; /&gt;

    &lt;EditText
        android:id=&quot;@+id/editNameET&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_marginBottom=&quot;8dp&quot;
        android:layout_marginEnd=&quot;8dp&quot;
        android:layout_marginStart=&quot;8dp&quot;
        android:layout_marginTop=&quot;8dp&quot;
        android:ems=&quot;10&quot;
        android:hint=&quot;Coffee Name&quot;
        android:inputType=&quot;textPersonName&quot;
        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;
        app:layout_constraintEnd_toEndOf=&quot;parent&quot;
        app:layout_constraintHorizontal_bias=&quot;0.447&quot;
        app:layout_constraintStart_toEndOf=&quot;@+id/editNameTV&quot;
        app:layout_constraintTop_toTopOf=&quot;parent&quot;
        app:layout_constraintVertical_bias=&quot;0.307&quot; /&gt;

    &lt;EditText
        android:id=&quot;@+id/editPriceET&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_marginBottom=&quot;8dp&quot;
        android:layout_marginEnd=&quot;8dp&quot;
        android:layout_marginStart=&quot;8dp&quot;
        android:layout_marginTop=&quot;8dp&quot;
        android:ems=&quot;10&quot;
        android:hint=&quot;Price&quot;
        android:inputType=&quot;numberDecimal&quot;
        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;
        app:layout_constraintEnd_toEndOf=&quot;parent&quot;
        app:layout_constraintHorizontal_bias=&quot;0.447&quot;
        app:layout_constraintStart_toEndOf=&quot;@+id/editPriceTV&quot;
        app:layout_constraintTop_toTopOf=&quot;parent&quot;
        app:layout_constraintVertical_bias=&quot;0.572&quot; /&gt;

    &lt;EditText
        android:id=&quot;@+id/editShopET&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_marginStart=&quot;8dp&quot;
        android:ems=&quot;10&quot;
        android:hint=&quot;Shop&quot;
        android:inputType=&quot;textPersonName&quot;
        app:layout_constraintBottom_toTopOf=&quot;@+id/addPriceET&quot;
        app:layout_constraintEnd_toEndOf=&quot;parent&quot;
        app:layout_constraintHorizontal_bias=&quot;0.369&quot;
        app:layout_constraintStart_toEndOf=&quot;@+id/editShopTV&quot;
        app:layout_constraintTop_toBottomOf=&quot;@+id/editNameET&quot;
        app:layout_constraintVertical_bias=&quot;0.444&quot; /&gt;

    &lt;RatingBar
        android:id=&quot;@+id/editRatingBar&quot;
        android:layout_width=&quot;242dp&quot;
        android:layout_height=&quot;52dp&quot;
        android:rating=&quot;1&quot;
        android:stepSize=&quot;0.5&quot;
        app:layout_constraintBottom_toTopOf=&quot;@+id/editfooter&quot;
        app:layout_constraintEnd_toEndOf=&quot;parent&quot;
        app:layout_constraintStart_toStartOf=&quot;parent&quot;
        app:layout_constraintTop_toBottomOf=&quot;@+id/addPriceET&quot;
        app:layout_constraintVertical_bias=&quot;0.116&quot; /&gt;

    &lt;Button
        android:id=&quot;@+id/editCoffeeBtn&quot;
        android:layout_width=&quot;79dp&quot;
        android:layout_height=&quot;84dp&quot;
        android:layout_marginBottom=&quot;8dp&quot;
        android:background=&quot;@color/colorFontOffWhite&quot;
        android:drawableTop=&quot;@drawable/blue_add_48&quot;
        android:onClick=&quot;saveCoffee&quot;
        android:text=&quot;@string/saveCoffeeBtn&quot;
        app:layout_constraintBottom_toTopOf=&quot;@+id/editfooter&quot;
        app:layout_constraintEnd_toEndOf=&quot;parent&quot;
        app:layout_constraintHorizontal_bias=&quot;0.501&quot;
        app:layout_constraintStart_toStartOf=&quot;parent&quot;
        app:layout_constraintTop_toBottomOf=&quot;@+id/addRatingBar&quot;
        app:layout_constraintVertical_bias=&quot;0.466&quot; /&gt;

    &lt;TextView
        android:id=&quot;@+id/editTitleTV&quot;
        android:layout_width=&quot;199dp&quot;
        android:layout_height=&quot;45dp&quot;
        android:layout_marginEnd=&quot;8dp&quot;
        android:layout_marginStart=&quot;8dp&quot;
        android:layout_marginTop=&quot;28dp&quot;
        android:text=&quot;Title&quot;
        android:textSize=&quot;30sp&quot;
        app:layout_constraintEnd_toEndOf=&quot;parent&quot;
        app:layout_constraintHorizontal_bias=&quot;0.109&quot;
        app:layout_constraintStart_toStartOf=&quot;parent&quot;
        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;

    &lt;ImageView
        android:id=&quot;@+id/editFavourite&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_marginEnd=&quot;8dp&quot;
        android:layout_marginStart=&quot;8dp&quot;
        android:layout_marginTop=&quot;16dp&quot;
        android:onClick=&quot;toggle&quot;
        app:layout_constraintEnd_toEndOf=&quot;parent&quot;
        app:layout_constraintHorizontal_bias=&quot;0.929&quot;
        app:layout_constraintStart_toStartOf=&quot;parent&quot;
        app:layout_constraintTop_toTopOf=&quot;parent&quot;
        app:srcCompat=&quot;@drawable/favourites_72&quot; /&gt;</code></pre>
<p>and the default Activity with this</p>
<pre><code class="lang-java">public class Edit extends Base {
    public Context context;
    public boolean isFavourite;
    public Coffee aCoffee;
    public ImageView editFavourite;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.edit);
        context = this;
    }

    public void saveCoffee(View v) {

        String coffeeName = ((EditText) findViewById(R.id.editNameET)).getText().toString();
        String coffeeShop = ((EditText) findViewById(R.id.editShopET)).getText().toString();
        String coffeePriceStr = ((EditText) findViewById(R.id.editPriceET)).getText().toString();
        double ratingValue =((RatingBar) findViewById(R.id.editRatingBar)).getRating();
        double coffeePrice;

        try {
            coffeePrice = Double.parseDouble(coffeePriceStr);
        } catch (NumberFormatException e) {
            coffeePrice = 0.0;
        }

        if ((coffeeName.length() &gt; 0) &amp;&amp; (coffeeShop.length() &gt; 0) &amp;&amp; (coffeePriceStr.length() &gt; 0)) {
            aCoffee.coffeeName = coffeeName;
            aCoffee.shop = coffeeShop;
            aCoffee.price = coffeePrice;
            aCoffee.rating = ratingValue;

            // Update coffee &amp; return home

        } else
            Toast.makeText(this, &quot;You must Enter Something for Name and Shop&quot;,Toast.LENGTH_SHORT).show();
    }
}</code></pre>
<p>We also need a custom row layout, so create a new &#39;coffeerow&#39; layout in the &#39;layout&#39; folder like so</p>
<p><img src="img/coffeerow.png" alt=""></p>
<p>and replace the default with this</p>
<pre><code class="lang-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;android.support.constraint.ConstraintLayout
    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;

    &lt;ImageView
        android:id=&quot;@+id/rowFavouriteImg&quot;
        android:layout_width=&quot;39dp&quot;
        android:layout_height=&quot;39dp&quot;
        android:layout_alignParentStart=&quot;true&quot;
        android:layout_marginEnd=&quot;8dp&quot;
        android:layout_marginStart=&quot;8dp&quot;
        android:layout_marginTop=&quot;8dp&quot;
        android:contentDescription=&quot;fav&quot;
        android:gravity=&quot;center_vertical&quot;
        android:src=&quot;@drawable/favourites_72&quot;
        app:layout_constraintEnd_toEndOf=&quot;parent&quot;
        app:layout_constraintHorizontal_bias=&quot;0.024&quot;
        app:layout_constraintStart_toStartOf=&quot;parent&quot;
        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;

    &lt;ImageView
        android:id=&quot;@+id/rowDeleteImg&quot;
        android:layout_width=&quot;45dp&quot;
        android:layout_height=&quot;45dp&quot;
        android:layout_alignParentEnd=&quot;true&quot;
        android:layout_alignParentTop=&quot;true&quot;
        android:layout_marginEnd=&quot;8dp&quot;
        android:layout_marginStart=&quot;8dp&quot;
        android:layout_marginTop=&quot;8dp&quot;
        android:contentDescription=&quot;fav&quot;
        android:src=&quot;@android:drawable/ic_delete&quot;
        app:layout_constraintEnd_toEndOf=&quot;parent&quot;
        app:layout_constraintHorizontal_bias=&quot;1.0&quot;
        app:layout_constraintStart_toStartOf=&quot;parent&quot;
        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;

    &lt;TextView
        android:id=&quot;@+id/rowCoffeeName&quot;
        android:layout_width=&quot;130dp&quot;
        android:layout_height=&quot;20dp&quot;
        android:layout_alignTop=&quot;@+id/rowFavouriteImg&quot;
        android:layout_marginEnd=&quot;8dp&quot;
        android:layout_marginStart=&quot;8dp&quot;
        android:layout_marginTop=&quot;8dp&quot;
        android:layout_toEndOf=&quot;@+id/rowFavouriteImg&quot;
        android:gravity=&quot;center_vertical&quot;
        android:text=&quot;Coffee Name&quot;
        android:textAlignment=&quot;viewStart&quot;
        android:textColor=&quot;@color/colorPrimary&quot;
        android:textSize=&quot;14sp&quot;
        android:textStyle=&quot;bold&quot;
        app:layout_constraintEnd_toEndOf=&quot;parent&quot;
        app:layout_constraintHorizontal_bias=&quot;0.277&quot;
        app:layout_constraintStart_toStartOf=&quot;parent&quot;
        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;

    &lt;TextView
        android:id=&quot;@+id/rowCoffeeShop&quot;
        android:layout_width=&quot;130dp&quot;
        android:layout_height=&quot;16dp&quot;
        android:layout_alignBottom=&quot;@+id/rowFavouriteImg&quot;
        android:layout_alignStart=&quot;@+id/rowCoffeeName&quot;
        android:layout_marginEnd=&quot;8dp&quot;
        android:layout_marginStart=&quot;8dp&quot;
        android:layout_marginTop=&quot;32dp&quot;
        android:gravity=&quot;center_vertical&quot;
        android:text=&quot;Coffee Shop&quot;
        android:textAlignment=&quot;viewStart&quot;
        android:textColor=&quot;@color/colorFontBlack&quot;
        android:textSize=&quot;12sp&quot;
        android:textStyle=&quot;bold&quot;
        app:layout_constraintEnd_toEndOf=&quot;parent&quot;
        app:layout_constraintHorizontal_bias=&quot;0.277&quot;
        app:layout_constraintStart_toStartOf=&quot;parent&quot;
        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;

    &lt;TextView
        android:id=&quot;@+id/rowRating&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_alignBottom=&quot;@+id/rowDeleteImg&quot;
        android:layout_marginEnd=&quot;8dp&quot;
        android:layout_marginStart=&quot;8dp&quot;
        android:layout_marginTop=&quot;32dp&quot;
        android:layout_toStartOf=&quot;@+id/rowDeleteImg&quot;
        android:gravity=&quot;center_vertical&quot;
        android:text=&quot;5.0 *&quot;
        android:textAlignment=&quot;viewStart&quot;
        android:textColor=&quot;@color/colorFontBlack&quot;
        android:textSize=&quot;12sp&quot;
        android:textStyle=&quot;bold&quot;
        app:layout_constraintEnd_toEndOf=&quot;parent&quot;
        app:layout_constraintHorizontal_bias=&quot;0.79&quot;
        app:layout_constraintStart_toStartOf=&quot;parent&quot;
        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;

    &lt;TextView
        android:id=&quot;@+id/rowPrice&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_alignStart=&quot;@+id/rowRating&quot;
        android:layout_alignTop=&quot;@+id/rowDeleteImg&quot;
        android:layout_marginEnd=&quot;8dp&quot;
        android:layout_marginStart=&quot;8dp&quot;
        android:layout_marginTop=&quot;8dp&quot;
        android:gravity=&quot;center_vertical&quot;
        android:text=&quot;â‚¬3.99&quot;
        android:textAlignment=&quot;viewStart&quot;
        android:textColor=&quot;@color/colorPrimary&quot;
        android:textSize=&quot;14sp&quot;
        android:textStyle=&quot;bold&quot;
        app:layout_constraintEnd_toEndOf=&quot;parent&quot;
        app:layout_constraintHorizontal_bias=&quot;0.819&quot;
        app:layout_constraintStart_toStartOf=&quot;parent&quot;
        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;
&lt;/android.support.constraint.ConstraintLayout&gt;</code></pre>
<p>and we need &#39;adapter&#39; code and &#39;fragment&#39; code to enhance our UI so go ahead and create 2 new packages</p>
<pre><code class="lang-java">ie.cm.adapters
ie.cm.fragments</code></pre>
<p>and create the respective <b>JAVA</b> classes within them as shown in the screenshot below</p>
<p><img src="img/starter.png" alt=""></p>
<p>Replace &#39;CoffeeItem&#39; with</p>
<pre><code class="lang-java">public class CoffeeItem {
    View view;

    public CoffeeItem(Context context, ViewGroup parent,
                      View.OnClickListener deleteListener, Coffee coffee)
    {
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        view = inflater.inflate(R.layout.coffeerow, parent, false);
        view.setTag(coffee.coffeeId);

        updateControls(coffee);

        ImageView imgDelete = (ImageView) view.findViewById(R.id.rowDeleteImg);
        imgDelete.setTag(coffee);
        imgDelete.setOnClickListener(deleteListener);
    }

    private void updateControls(Coffee coffee) {
        ((TextView) view.findViewById(R.id.rowCoffeeName)).setText(coffee.coffeeName);

        // Do the same for shop, rating, price &amp; the favourite image here
        // and set the favourite on/off depending on the coffees favourite value

    }
}</code></pre>
<p>replace &#39;CoffeeListAdapter&#39; with</p>
<pre><code class="lang-java">public class CoffeeListAdapter extends ArrayAdapter&lt;Coffee&gt;
{
  private Context context;
  private OnClickListener deleteListener;
  public List&lt;Coffee&gt; coffeeList;

  public CoffeeListAdapter(Context context, OnClickListener deleteListener, List&lt;Coffee&gt; coffeeList)
  {
    super(context, R.layout.coffeerow, coffeeList);

    this.context = context;
    this.deleteListener = deleteListener;
    this.coffeeList = coffeeList;
  }

  @Override
  public View getView(int position, View convertView, ViewGroup parent)
  {
    return null;
  }

  @Override
  public int getCount()
  {
    return 0;
  }
}</code></pre>
<p>and replace &#39;CoffeeFragment&#39; with</p>
<pre><code class="lang-java">public class CoffeeFragment  extends ListFragment implements  OnClickListener
{
  public         Base                activity;
  public static  CoffeeListAdapter     listAdapter;
  public         ListView             listView;

  public CoffeeFragment() {
    // Required empty public constructor
  }

  public static CoffeeFragment newInstance() {
    CoffeeFragment fragment = new CoffeeFragment();
    return fragment;
  }

@Override
  public void onAttach(Context context)
  {
    super.onAttach(context);
    this.activity = (Base) context;
  }

  @Override
  public void onCreate(Bundle savedInstanceState)
  {
    super.onCreate(savedInstanceState);

  }

  @Override
  public void onStart()
  {
    super.onStart();
  }

  @Override
  public void onClick(View view)
  {
  }
}</code></pre>
<p>and replace your &#39;Coffee&#39; class with</p>
<pre><code class="lang-java">public class Coffee implements Serializable
{
    public String coffeeId;
    public String coffeeName;
    public String shop;
    public double rating;
    public double price;
    public boolean favourite;

    public Coffee() {}

    public Coffee(String name, String shop, double rating, double price, boolean fav)
    {
        this.coffeeId = UUID.randomUUID().toString();
        this.coffeeName = name;
        this.shop = shop;
        this.rating = rating;
        this.price = price;
        this.favourite = fav;
    }

    @Override
    public String toString() {
        return coffeeId + &quot; &quot; + coffeeName + &quot;, &quot; + shop + &quot;, &quot; + rating
                + &quot;, &quot; + price + &quot;, fav =&quot; + favourite;
    }
}</code></pre>
<p>The last thing to do is refactor our app to use fragments so</p>
<p>first, replace your current &#39;content_home&#39; with the following</p>
<pre><code class="lang-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;android.support.constraint.ConstraintLayout
    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot;
    tools:context=&quot;.activities.Home&quot;
    tools:showIn=&quot;@layout/home&quot;&gt;

    &lt;Button
        android:id=&quot;@+id/searchBtn&quot;
        android:layout_width=&quot;93dp&quot;
        android:layout_height=&quot;119dp&quot;
        android:background=&quot;@color/colorFontOffWhite&quot;
        android:drawableTop=&quot;@drawable/search_72&quot;
        android:text=&quot;@string/searchCoffeesLbl&quot;
        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;
        app:layout_constraintEnd_toEndOf=&quot;parent&quot;
        app:layout_constraintStart_toStartOf=&quot;parent&quot;
        app:layout_constraintTop_toTopOf=&quot;parent&quot;
        app:layout_constraintVertical_bias=&quot;0.033&quot; /&gt;

    &lt;Button
        android:id=&quot;@+id/addBtn&quot;
        android:layout_width=&quot;93dp&quot;
        android:layout_height=&quot;119dp&quot;
        android:background=&quot;@color/colorFontOffWhite&quot;
        android:drawableTop=&quot;@drawable/add_72&quot;
        android:onClick=&quot;add&quot;
        android:text=&quot;@string/addACoffeeLbl&quot;
        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;
        app:layout_constraintEnd_toEndOf=&quot;parent&quot;
        app:layout_constraintHorizontal_bias=&quot;0.094&quot;
        app:layout_constraintStart_toStartOf=&quot;parent&quot;
        app:layout_constraintTop_toTopOf=&quot;parent&quot;
        app:layout_constraintVertical_bias=&quot;0.033&quot; /&gt;

    &lt;Button
        android:id=&quot;@+id/favouritesBtn&quot;
        android:layout_width=&quot;93dp&quot;
        android:layout_height=&quot;119dp&quot;
        android:background=&quot;@color/colorFontOffWhite&quot;
        android:drawableTop=&quot;@drawable/favourites_72&quot;
        android:text=&quot;@string/favouritesCoffeeLbl&quot;
        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;
        app:layout_constraintEnd_toEndOf=&quot;parent&quot;
        app:layout_constraintHorizontal_bias=&quot;0.915&quot;
        app:layout_constraintStart_toStartOf=&quot;parent&quot;
        app:layout_constraintTop_toTopOf=&quot;parent&quot;
        app:layout_constraintVertical_bias=&quot;0.033&quot; /&gt;

    &lt;TextView
        android:id=&quot;@+id/addBarTV&quot;
        android:layout_width=&quot;0dp&quot;
        android:layout_height=&quot;21dp&quot;
        android:background=&quot;@color/colorPrimary&quot;
        android:text=&quot;@string/recentlyViewedLbl&quot;
        android:textAlignment=&quot;center&quot;
        android:textColor=&quot;@color/colorFontWhite&quot;
        android:textSize=&quot;16dp&quot;
        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;
        app:layout_constraintEnd_toEndOf=&quot;parent&quot;
        app:layout_constraintHorizontal_bias=&quot;0.0&quot;
        app:layout_constraintStart_toStartOf=&quot;parent&quot;
        app:layout_constraintTop_toBottomOf=&quot;@+id/addBtn&quot;
        app:layout_constraintVertical_bias=&quot;0.027&quot; /&gt;

    &lt;TextView
        android:id=&quot;@+id/footer&quot;
        android:layout_width=&quot;0dp&quot;
        android:layout_height=&quot;36dp&quot;
        android:background=&quot;@color/colorPrimary&quot;
        android:paddingTop=&quot;5dp&quot;
        android:text=&quot;@string/appWebsite&quot;
        android:textAlignment=&quot;center&quot;
        android:textColor=&quot;@color/colorFontWhite&quot;
        android:textSize=&quot;16sp&quot;
        android:textStyle=&quot;bold&quot;
        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;
        app:layout_constraintEnd_toEndOf=&quot;parent&quot;
        app:layout_constraintHorizontal_bias=&quot;0.0&quot;
        app:layout_constraintStart_toStartOf=&quot;parent&quot; /&gt;

    &lt;TextView
        android:id=&quot;@+id/emptyList&quot;
        android:layout_width=&quot;266dp&quot;
        android:layout_height=&quot;31dp&quot;
        android:layout_gravity=&quot;center&quot;
        android:text=&quot;@string/emptyMessageLbl&quot;
        android:textSize=&quot;12sp&quot;
        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;
        app:layout_constraintEnd_toEndOf=&quot;parent&quot;
        app:layout_constraintHorizontal_bias=&quot;0.584&quot;
        app:layout_constraintStart_toStartOf=&quot;parent&quot;
        app:layout_constraintTop_toTopOf=&quot;parent&quot;
        app:layout_constraintVertical_bias=&quot;0.662&quot; /&gt;

    &lt;FrameLayout
        android:id=&quot;@+id/fragment_container&quot;
        android:layout_width=&quot;378dp&quot;
        android:layout_height=&quot;310dp&quot;
        android:layout_marginBottom=&quot;8dp&quot;
        android:layout_marginTop=&quot;8dp&quot;
        app:layout_constraintBottom_toBottomOf=&quot;@+id/footer&quot;
        app:layout_constraintEnd_toEndOf=&quot;parent&quot;
        app:layout_constraintStart_toStartOf=&quot;parent&quot;
        app:layout_constraintTop_toTopOf=&quot;@+id/searchBtn&quot;
        app:layout_constraintVertical_bias=&quot;0.84&quot;&gt;

    &lt;/FrameLayout&gt;

&lt;/android.support.constraint.ConstraintLayout&gt;</code></pre>
<p>add the following variables to your &#39;Base&#39; classes</p>
<pre><code class="lang-java">public Bundle            activityInfo; // Used for persistence (of sorts)
public CoffeeFragment    coffeeFragment; // How we&#39;ll &#39;share&#39; our List of Coffees between Activities</code></pre>
<p>and replace your &#39;Home.java&#39; with</p>
<pre><code class="lang-java">public class Home extends Base {

    TextView emptyList;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.home);
        Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);
        setSupportActionBar(toolbar);

        emptyList = findViewById(R.id.emptyList);

        FloatingActionButton fab = findViewById(R.id.fab);
        fab.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                Snackbar.make(view, &quot;Information&quot;, Snackbar.LENGTH_LONG)
                        .setAction(&quot;More Info...&quot;, new View.OnClickListener() {
                            @Override
                            public void onClick(View view) {

                            }
                        }).show();
            }
        });
        this.setupCoffees();
    }

    public void add(View v) {
        startActivity(new Intent(this, Add.class));
    }

    @Override
    protected void onResume() {
        super.onResume();

        if(coffeeList.isEmpty())
            emptyList.setText(getString(R.string.emptyMessageLbl));
        else
            emptyList.setText(&quot;&quot;);

    }

    public void setupCoffees(){
        coffeeList.add(new Coffee(&quot;Standard Black&quot;, &quot;Some Shop&quot;,2.5,1.99,false));
        coffeeList.add(new Coffee(&quot;Regular Joe&quot;, &quot;Joe&#39;s Place&quot;,3.5,2.99,true));
        coffeeList.add(new Coffee(&quot;Espresso&quot;, &quot;Ardkeen Stores&quot;,4.5,1.49,true));
    }
}</code></pre>
<p>Fix any import errors (as you will get them :) ) and take some time to familiarise yourself with the <b>new (highlighted)</b> classes in your project and explore the resources that you will be referring to throughout the lab, especially the layouts in both &#39;Graphical Layout&#39; view and &#39;XML&#39; view. It&#39;s also probably a good idea to run the App at this stage too, so you can set up your AVD (if you haven&#39;t done so already) and confirm that the starter app is configured properly and running (so basically it&#39;s Version 1 with a few changes).</p>
<p>In this lab, you are required to do the following:</p>
<ul>
<li><p>Display the list of Coffees in a visually appealing list.</p>
</li>
<li><p>Allow Coffees in the list to be updated (edited) and/or deleted from the list.</p>
</li>
</ul>
<p>The following steps will guide you through these requirements, so we&#39;ll start with displaying the Coffees in a nice list.</p>

          </div>
        
          <div class="ui tab segment lab" data-tab="02">
            <h1>Our &#39;new look&#39; Home Screen - Displaying the List of Coffees</h1>
<p>When we&#39;re finished this lab, we&#39;ll have something like this</p>
<p><img src="img/finished.png" alt=""></p>
<p>So, first of all, have a quick look again at the resource layout (content_home.xml). We&#39;re using a <b><i>FrameLayout</i></b> as the container for our List of Coffees, which ultimately holds a <b>Fragment</b>, but we&#39;ll talk more about that later.</p>
<p>Once you&#39;ve had a look at the layout, open your <b>Base.java</b> Activity class and familiarise yourself with the new variables this class now has.</p>
<p>There&#39;s two new instance variables</p>
<pre><code class="lang-java">  protected Bundle            activityInfo; // Used for persistence (of sorts)
  protected CoffeeFragment    coffeeFragment; // How we&#39;ll &#39;share&#39; our List of Coffees between Activities</code></pre>
<p>Note : The <b><i>setupCoffees()</i></b> method adds a few Coffee objects to our static <b><i>coffeeList</i></b>, so we can use/call this in our &#39;onCreate()&#39; just to have a few coffees in our list to start.</p>
<p>Next we&#39;ll begin with the task of displaying our Coffees in a custom ListView (inside a Fragment!).</p>
<p>There are 3 major components (classes) involved in implementing this feature:</p>
<ul>
<li><p><i>CoffeeItem</i></p>
</li>
<li><p><i>CoffeeListAdapter</i></p>
</li>
<li><p><i>CoffeeFragment</i></p>
</li>
</ul>
<p>We&#39;ll take each class in turn and insert the necessary code to complete this feature of the App.</p>
<h1>CoffeeItem</h1>
<p>The main purpose of this class is to represent a single coffee row in our custom list, so the first thing we need to do is decide how the row should actually look - the associated layout (coffeerow.xml) is already there:</p>
<p><img src="img/coffeerowimg.png" alt=""></p>
<p>but familiarise yourself with the widgets (the &#39;fields&#39; or Views) as you will need to access them in your code.</p>
<p>Inside <b>CoffeeItem.java</b> you will need to finish the <b><i>updateControls()</i></b> method to ensure all the coffee data is displayed correctly. This will involve &quot;binding&quot; to each of the widgets (Views) on the layout and setting their value.  You can see how the coffee name widget is set below:</p>
<pre><code class="lang-java">private void updateControls(Coffee coffee) {
        ((TextView) view.findViewById(R.id.rowCoffeeName)).setText(coffee.coffeeName);

        // Do the same for shop, rating, price &amp; the favourite image here
        // and set the favourite on/off depending on the coffees favourite value
    }</code></pre>
<h1>CoffeeListAdapter</h1>
<p>The main purpose of this class is to bind our coffeeList data to a particular view (a ListView in our case) and ultimately display it like so:</p>
<p><img src="img/coffeelistapp.png" alt=""></p>
<p>It&#39;s worth noting that this class is a <i><u>custom</u></i> adapter class, and it&#39;s the only way we get to display or coffee data in the &quot;custom&quot; format we want (ie our CoffeeItem rows) - if we were to use a standard Adapter, we would only be able to display our coffees in a very basic fashion.</p>
<p>To &quot;customise&quot; our adapter, we first say that it will manage Coffee Objects (already done) :</p>
<pre><code class="lang-Java">public class CoffeeListAdapter extends ArrayAdapter&lt;Coffee&gt;
{
...</code></pre>
<p>and then override a number of methods:</p>
<pre><code class="lang-Java">  @Override
  public View getView(int position, View convertView, ViewGroup parent)
  {
    return null;
  }

  @Override
  public int getCount()
  {
    return 0;
  }
}</code></pre>
<p>Remember, the <b><i>getView()</i></b> method is automatically called for every object that exists in the underlying data (ie our coffeeList) so you should be returning a <b>CoffeeItem</b> reference here - try and have a go at this without referring to the notes.</p>
<p>The remaining methods are all related to the coffeeList itself, so again, give it a go without the notes!</p>
<p>You&#39;ll also need to Override <b><i>getItem()</i></b> like so, which we&#39;ll make use of in the next lab.</p>
<pre><code>@Override
   public Coffee getItem(int position) {
       return coffeeList.get(position);
   }</code></pre>
<h1>CoffeeFragment</h1>
<p>The main purpose of this class is to allow us to reuse a component (the Fragment) which contains our list of coffees:</p>
<p><img src="img/coffeefragment.png" alt=""></p>
<p>The only thing we need to do at this stage is create an instance of our custom adapter and associate it with our Fragment, so inside the <b><i>onCreate()</i></b> method of the fragment insert the following:</p>
<pre><code class="lang-Java">    listAdapter = new CoffeeListAdapter(activity, this, Base.coffeeList);
    setListAdapter (listAdapter);</code></pre>
<hr>
<p>The last thing we need to do is attach this Fragment to the Home Screen, so inside our <b><i>onResume()</i></b> method in <b><i>Home.java</i></b> you need to insert the following:</p>
<pre><code class="lang-Java">coffeeFragment = CoffeeFragment.newInstance(); //get a new Fragment instance
    getFragmentManager().beginTransaction()
                    .add(R.id.fragment_container, coffeeFragment)
                    .commit(); // add it to the current activity</code></pre>
<p>Build your project and if you run your app again you should see your list of coffees displayed on the Home Screen.</p>
<p>You should also still be able to &quot;Add a Coffee&quot; so make sure to check this functionality. On a related note, you&#39;ve probably noticed your list &#39;duplicates&#39; the data, so it&#39;s worth removing the <b>setupCoffees()</b> method, now we know our &#39;Add&#39; works.</p>
<p>However, if you select a row in the list, or select the &#39;delete&#39; button, nothing happens - that&#39;s the next step.</p>

          </div>
        
          <div class="ui tab segment lab" data-tab="03">
            <h1>Our &#39;new look&#39; Home Screen - Delete a Coffee</h1>
<p>Having a nice custom list isn&#39;t really much use unless the user can interact with the list like clicking on a row (or an element within the row). Over the next few steps we&#39;ll build in the ability to both edit a coffee&#39;s details, and if the user wishes, delete it from the list.</p>
<h1>Deleting a Coffee</h1>
<p>To give the user the option of deleting a coffee (by pressing the &#39;X&#39; button) we first need to &quot;listen&quot; for such an event, so we should attach some kind of Listener to that button. If you have a closer look at our <b>CoffeeItem</b> constructor, you&#39;ll see that we already have that setup:</p>
<pre><code class="lang-java">            ImageView imgDelete = view.findViewById(R.id.rowDeleteImg);
            imgDelete.setTag(coffee);
            imgDelete.setOnClickListener(deleteListener);</code></pre>
<p>Be clear about what is going on here as the <b><i>setTag()</i></b> method is important in the overall scheme of things.</p>
<p>The rest of the work we need to do is carried out in the <b>CoffeeFragment</b> class so firstly, look again at how we create our <b>CoffeeListAdapter</b> instance, <i>listAdapter</i>:</p>
<pre><code class="lang-java">listAdapter = new CoffeeListAdapter(activity, this, Base.coffeeList);</code></pre>
<p>Notice that the <b>OnClickListener</b> parameter, is a reference to the class itself (<i>this</i>) so the <b>CoffeeFragment</b> class needs to implement this interface as follows:</p>
<p>Your completed <b><i>onClick()</i></b> method should look something like this:</p>
<pre><code class="lang-java">@Override
  public void onClick(View view)
  {
    if (view.getTag() instanceof Coffee)
    {
      onCoffeeDelete ((Coffee) view.getTag());
    }
  }</code></pre>
<p>Here we use the Views &#39;Tag&#39; to see if it&#39;s a coffee, and if it is, that&#39;s the one we delete. You can just copy &amp; paste the following code for the <b><i>onCoffeeDelete()</i></b> method:</p>
<pre><code class="lang-java">public void onCoffeeDelete(final Coffee coffee)
  {
    String stringName = coffee.name;
    AlertDialog.Builder builder = new AlertDialog.Builder(activity);
    builder.setMessage(&quot;Are you sure you want to Delete the \&#39;Coffee\&#39; &quot; + stringName + &quot;?&quot;);
    builder.setCancelable(false);

    builder.setPositiveButton(&quot;Yes&quot;, new DialogInterface.OnClickListener()
    {
      public void onClick(DialogInterface dialog, int id)
      {
        Base.coffeeList.remove(coffee); // remove from our list
        listAdapter.coffeeList.remove(coffee); // update adapters data
        listAdapter.notifyDataSetChanged(); // refresh adapter
      }
    }).setNegativeButton(&quot;No&quot;, new DialogInterface.OnClickListener()
    {
      public void onClick(DialogInterface dialog, int id)
      {
        dialog.cancel();
      }
    });
    AlertDialog alert = builder.create();
    alert.show();
  }</code></pre>
<p>Pay particular attention to the following:</p>
<pre><code class="lang-java">public void onClick(DialogInterface dialog, int id)
      {
        Base.coffeeList.remove(coffee); // remove from our list
        listAdapter.coffeeList.remove(coffee); // update adapters data
        listAdapter.notifyDataSetChanged(); // refresh adapter
      }</code></pre>
<p>and understand what is happening here, as this is an important piece of the puzzle.</p>
<p>So now, when you run the app and select the delete button, you should get something like this:</p>
<p><img src="img/deletecoffee.png" alt=""></p>
<p>and if you choose &#39;Yes&#39;, then the coffee should be removed from the list.</p>
<p>Now, onto editing a coffee.....</p>

          </div>
        
          <div class="ui tab segment lab" data-tab="04">
            <h1>Our &#39;new look&#39; Home Screen - Edit a Coffee</h1>
<p>The user now has the ability to delete (or remove) a coffee from the list of coffees displayed. But what if the user wants to update some of the coffees details? Maybe make it one of his or hers favourite coffees? That&#39;s what this step is about, so we&#39;ll be taking a similar approach as the previous step, but implementing a slightly different kind of Listener.</p>
<h1>Editing a Coffee</h1>
<p>To give the user the option of Editing a coffee (by pressing the full row) we first need to &quot;listen&quot; for such an event, so we need to attach a Listener that &#39;listens&#39; for individual row click events, and not just an element of the row.</p>
<p>If you remember from the previous step, our <b>CoffeeFragment</b> was responsible for handling &#39;delete&#39; events, so naturally, this class will also manage any updates or edits the user wants to make.</p>
<p>Open your <b>CoffeeFragment.java</b> and override the <b><i>onListItemClick()</i></b> method - this will execute every time a user selects a single row (or listItem) in the list, so this is where you need to</p>
<ul>
<li><p>find out which coffee was selected (and it&#39;s &#39;ID&#39;)</p>
</li>
<li><p>launch another activity so we can update the selected coffee</p>
</li>
<li><p>make sure the change to our coffee is reflected in our coffeeList</p>
</li>
</ul>
<p>You can use Android Studio shortcuts to do this like so:</p>
<p>Anywhere inside your <b>CoffeeFragment.java</b> right mouse click and select &#39;Generate&#39;</p>
<p><img src="img/listitemclick1.png" alt=""></p>
<p>then &#39;Override Methods&#39;</p>
<p><img src="img/listitemclick2.png" alt=""></p>
<p>next, choose the relevant method to override</p>
<p><img src="img/listitemclick3.png" alt=""></p>
<p>and you should get this</p>
<p><img src="img/listitemclick4.png" alt=""></p>
<p>We need to use <b>Bundles</b> and <b>Intents</b> and specifically, the first two requirements are somewhat achieved with the following:</p>
<pre><code class="lang-java">Bundle activityInfo = new Bundle(); // Creates a new Bundle object
activityInfo.putString(&quot;coffeeId&quot;, /* pass in the coffees id here */);

Intent goEdit = new Intent(getActivity(), Edit.class); // Creates a new Intent
/* Add the bundle to the intent here */
getActivity().startActivity(goEdit); // Launch the Intent</code></pre>
<p>Have a go at completing the above as best you can.</p>
<p>Once you have that done, the rest of the work we need to do is carried out in the <b>Edit</b> Activity class so firstly, have a look at the <b><i>onCreate()</i></b> method - there&#39;s some code already in there, so run the app, and select the &#39;favourite&#39; image to &#39;toggle it&#39; on/off - does it behave as expected? does it even crash?</p>
<p>If it does, any ideas why??</p>
<p>You need to setup event handling on <i>editFavourite</i> in the java source to avoid a NullPointerException, so you need to implement the &#39;toggle method as follows:</p>
<pre><code class="lang-java">public void toggle (View view) {
  // Bind to the editFavourite imageview and toggle its image
  // depending on whether it&#39;s a &#39;favourite&#39; coffee or not
}</code></pre>
<p>and bind to the &#39;editFavourite&#39; ImageView.</p>
<p>You then need to retrieve the &#39;coffeeId&#39; from the Bundle, and get the coffee from our list - once again, try and have a go at all this without referring to the solution code and/or the notes:</p>
<p>Now if you run your app, and select a row, you should launch the &#39;Edit&#39; Screen correctly.</p>
<p><img src="img/editscreen.png" alt=""></p>
<p>However, there&#39;s nothing to edit - so that&#39;s the next step - displaying the coffee data so we can change it (like above).</p>

          </div>
        
          <div class="ui tab segment lab" data-tab="05">
            <h1>Our &#39;new look&#39; Home Screen - Edit a Coffee</h1>
<p>We can now launch the Edit Screen, but nothing gets displayed, so there&#39;s nothing to edit. What we need to do now is</p>
<ul>
<li><p>&#39;bind&#39; the specific coffee data to the individual views/fields on the Edit Screen</p>
</li>
<li><p>if any changes are made, ensure these changes are reflected in the global coffeeList</p>
</li>
</ul>
<h1>Displaying the data for Update</h1>
<p>First of all, open your <i>edit.xml</i> layout and familiarise yourself with the &#39;names&#39; or id&#39;s of all the relevant views you need to access.</p>
<p>Here&#39;s how we set the title &#39;field&#39; to the name of the coffee</p>
<pre><code class="lang-java">((TextView)findViewById(R.id.editTitleTV)).setText(aCoffee.coffeeName);</code></pre>
<p>Run the app again, and see what you get - now have a go at the rest of the coffee data yourself.</p>
<p>Here&#39;s how to set up the &#39;Favourites&#39; image:</p>
<pre><code class="lang-java">editFavourite = findViewById(R.id.editFavourite);

         if (aCoffee.favourite == true) {
                 editFavourite.setImageResource(R.drawable.favourites_72_on);
                 isFavourite = true;
         } else {
                 editFavourite.setImageResource(R.drawable.favourites_72);
                 isFavourite = false;
         }</code></pre>
<p>and your <b>toggle()</b> method should look something like this:</p>
<pre><code class="lang-java">public void toggle(View view) {

             if (isFavourite) {
                     aCoffee.favourite = false;
                     Toast.makeText(this,&quot;Removed From Favourites&quot;,Toast.LENGTH_SHORT).show();
                     isFavourite = false;
                     editFavourite.setImageResource(R.drawable.favourites_72);
             } else {
                     aCoffee.favourite = true;
                     Toast.makeText(this,&quot;Added to Favourites !!&quot;,Toast.LENGTH_SHORT).show();
                     isFavourite = true;
                     editFavourite.setImageResource(R.drawable.favourites_72_on);
             }
     }</code></pre>
<p>Don&#39;t forget to return &#39;Home&#39; after updating your coffee data.</p>
<p>It&#39;s worth noting that the coffee is only updated in our list of coffees if we clicked the &#39;Save&#39; Button, and that we never actually &#39;put it back&#39; in the list after we updated it, but because our list is <i>static</i>, that&#39;s ok - any changes to a single coffee are updated in the global list. We might need to revisit this in later labs, but for now, it&#39;s all good.</p>
<p>You should run you app once more and fully test it for the features now implemented.</p>

          </div>
        
          <div class="ui tab segment lab" data-tab="06">
            <h1>Deleting Multiple Coffees with a Context Menu &amp; ActionMode</h1>
<p>Currently, if we wanted to delete more than one coffee at a time we need to delete them individually, which does achieve what we want, but is not a great User Experience if there are dozens of coffees to remove.</p>
<p>This is where we can utilise a Context Menu and the ActionBar / Action Mode features available to us in Android.</p>
<h1>Setting up your Resources &amp; XML</h1>
<p>This is what we want when the user &#39;Long Clicks&#39; a row (or rows) in our List.</p>
<p><img src="img/multidelete1.png" alt=""></p>
<p>Note the different (Context) Menu for deleting.</p>
<p>And then subsequently (after deleting)</p>
<p><img src="img/multidelete2.png" alt=""></p>
<p>To achieve this we need to</p>
<ul>
<li><p>design the Context Menu</p>
</li>
<li><p>update the coffeerow design (for when it&#39;s selected) and</p>
</li>
<li><p>update our application &#39;style&#39; to reflect what and how our Context Menu overlays.</p>
</li>
</ul>
<p>First, let&#39;s design the Menu to look something this:</p>
<p><img src="img/delete1.png" alt=""></p>
<p>and</p>
<p><img src="img/delete2.png" alt=""></p>
<p>create a new menu resource in the &#39;menu&#39; folder called <b>delete_list_context.xml</b> and place the following code inside it - just make sure you have the proper string resource set up beforehand (&#39;deleteCoffeesLbl&#39;)</p>
<pre><code class="lang-XML">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;menu xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;
    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;
    &lt;item
        android:id=&quot;@+id/menu_item_delete_coffee&quot;
        android:icon=&quot;@android:drawable/ic_menu_delete&quot;
        android:title=&quot;@string/deleteCoffeesLbl&quot;
        app:showAsAction=&quot;ifRoom&quot; /&gt;
&lt;/menu&gt;</code></pre>
<p>Next, add a new &#39;color&#39; Resource</p>
<pre><code class="lang-xml">&lt;color name=&quot;colorMultiDelete&quot;&gt;#b1c4d9&lt;/color&gt;</code></pre>
<p>and then, create a new <b>drawable</b> resource xml file in the &#39;drawable&#39; folder called &#39;background_activated.xml&#39; and place the following inside</p>
<pre><code class="lang-XML">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; &gt;
    &lt;item
        android:state_activated=&quot;true&quot;
        android:drawable=&quot;@color/colorMultiDelete&quot;
        /&gt;
&lt;/selector&gt;</code></pre>
<p>Now, edit your <b>coffeerow.xml</b> and add the resource you just created as the background color property for the whole layout (at the top), like so</p>
<pre><code class="lang-xml"> android:background=&quot;@drawable/background_activated&quot;</code></pre>
<p>Finally, edit your <b>styles.xml</b> and add the following to your &#39;<b>AppTheme</b>&#39; style. If you like, you can experiment with you own colors?</p>
<pre><code class="lang-xml">&lt;item name=&quot;windowActionModeOverlay&quot;&gt;true&lt;/item&gt;
&lt;item name=&quot;actionModeBackground&quot;&gt;@color/colorPrimary&lt;/item&gt;</code></pre>
<h1>Implementing the MultiChoice Listener interface</h1>
<p>The first thing to do is open up &#39;<b>CoffeeFragment.java</b>&#39; and make sure this class implements the interface we need - <b>AbsListView.MultiChoiceModeListener</b> :</p>
<pre><code class="lang-java">public class CoffeeFragment  extends ListFragment implements  OnClickListener,
                                          AbsListView.MultiChoiceModeListener
{
    . . .
}</code></pre>
<p>add the necessary imports and accept the defaults for all the callbacks, we&#39;ll implement what we need to next.</p>
<p>The MultiChoiceModeListener methods are :</p>
<pre><code class="lang-java">/* ************ MultiChoiceModeListener methods (begin) *********** */
 @Override
 public boolean onCreateActionMode(ActionMode actionMode, Menu menu)
 { . . . }

 @Override
 public boolean onPrepareActionMode(ActionMode actionMode, Menu menu)
 { . . . }

 @Override
 public boolean onActionItemClicked(ActionMode actionMode, MenuItem menuItem)
 { . . . }

 @Override
 public void onDestroyActionMode(ActionMode actionMode)
 {}

 @Override
 public void onItemCheckedStateChanged(ActionMode actionMode, int position, long id, boolean checked)
 {}
 /* ************ MultiChoiceModeListener methods (end) *********** */</code></pre>
<p>We only need to implement a few of them, and supply one other local method to actually carry out the deleting of multiple coffees, when selected.</p>
<p>Using the lecture material as reference, have a go at implementing the necessary methods to achieve the desired functionality. (The solution is on the next step anyway, but have a go first).</p>
<h1>Setting up the List as MultipleChoice</h1>
<p>You&#39;ve now, hopefully, implemented the necessary callbacks for handling the MultiChoiceMode, but there&#39;s one step needs to be carried - the ListView itself needs to be &#39;aware&#39; that it&#39;s items can be selected individually AND as multiple items. This is achieved through setting some of the List properties as the &#39;View&#39; is created.</p>
<p>To help you along, here&#39;s the method you need to add to &#39;CoffeeFragment&#39;, to achieve the desired results, but be sure what&#39;s going on here, before proceeding.</p>
<pre><code class="lang-java">@Override
  public View onCreateView(LayoutInflater inflater, ViewGroup parent, Bundle savedInstanceState) {
    View v = super.onCreateView(inflater, parent, savedInstanceState);

    listView = v.findViewById(android.R.id.list);
    listView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE_MODAL);
    listView.setMultiChoiceModeListener(this);

    return v;
  }</code></pre>
<p>Run the app again and see if you can now delete multiple coffees through the use of a Context Menu and ActionMode/ActionBar.</p>

          </div>
        
          <div class="ui tab segment lab" data-tab="07">
            <h1>Completed CoffeeFragment</h1>
<p>Here&#39;s the full source code for the updated CoffeeFragment class, and the full solution can be found on the next, final step.</p>
<pre><code class="lang-java">package ie.cm.fragments;

import android.app.AlertDialog;
import android.app.ListFragment;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.os.Bundle;
import android.view.ActionMode;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AbsListView;
import android.widget.ListView;

import ie.cm.R;
import ie.cm.activities.Base;
import ie.cm.activities.Edit;
import ie.cm.adapters.CoffeeListAdapter;
import ie.cm.models.Coffee;

public class CoffeeFragment  extends ListFragment implements View.OnClickListener,
        AbsListView.MultiChoiceModeListener
{
    public Base activity;
    public static CoffeeListAdapter listAdapter;
    public ListView listView;

    public CoffeeFragment() {
        // Required empty public constructor
    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);

        Bundle activityInfo = new Bundle(); // Creates a new Bundle object
        activityInfo.putString(&quot;coffeeId&quot;, (String) v.getTag());
        Intent goEdit = new Intent(getActivity(), Edit.class); // Creates a new Intent
        /* Add the bundle to the intent here */
        goEdit.putExtras(activityInfo);
        getActivity().startActivity(goEdit); // Launch the Intent
    }

    public static CoffeeFragment newInstance() {
        CoffeeFragment fragment = new CoffeeFragment();
        return fragment;
    }

    @Override
    public void onAttach(Context context)
    {
        super.onAttach(context);
        this.activity = (Base) context;
    }

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        listAdapter = new CoffeeListAdapter(activity, this, Base.coffeeList);
        setListAdapter (listAdapter);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup parent, Bundle savedInstanceState) {
        View v = super.onCreateView(inflater, parent, savedInstanceState);

        listView = v.findViewById(android.R.id.list);
        listView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE_MODAL);
        listView.setMultiChoiceModeListener(this);

        return v;
    }

    @Override
    public void onStart()
    {
        super.onStart();
    }

    @Override
    public void onClick(View view)
    {
        if (view.getTag() instanceof Coffee)
        {
            onCoffeeDelete ((Coffee) view.getTag());
        }
    }

    public void onCoffeeDelete(final Coffee coffee)
    {
        String stringName = coffee.coffeeName;
        AlertDialog.Builder builder = new AlertDialog.Builder(activity);
        builder.setMessage(&quot;Are you sure you want to Delete the \&#39;Coffee\&#39; &quot; + stringName + &quot;?&quot;);
        builder.setCancelable(false);

        builder.setPositiveButton(&quot;Yes&quot;, new DialogInterface.OnClickListener()
        {
            public void onClick(DialogInterface dialog, int id)
            {
                Base.coffeeList.remove(coffee); // remove from our list
                listAdapter.coffeeList.remove(coffee); // update adapters data
                listAdapter.notifyDataSetChanged(); // refresh adapter
            }
        }).setNegativeButton(&quot;No&quot;, new DialogInterface.OnClickListener()
        {
            public void onClick(DialogInterface dialog, int id)
            {
                dialog.cancel();
            }
        });
        AlertDialog alert = builder.create();
        alert.show();
    }

    /* ************ MultiChoiceModeListener methods (begin) *********** */
    @Override
    public boolean onCreateActionMode(ActionMode actionMode, Menu menu)
    {
        MenuInflater inflater = actionMode.getMenuInflater();
        inflater.inflate(R.menu.delete_list_context, menu);
        return true;
    }

    @Override
    public boolean onPrepareActionMode(ActionMode actionMode, Menu menu) {
        return false;
    }

    @Override
    public boolean onActionItemClicked(ActionMode actionMode, MenuItem menuItem)
    {
        switch (menuItem.getItemId())
        {
            case R.id.menu_item_delete_coffee:
                deleteCoffees(actionMode);
                return true;
            default:
                return false;
        }
    }

    private void deleteCoffees(ActionMode actionMode)
    {
        for (int i = listAdapter.getCount() - 1; i &gt;= 0; i--)
        {
            if (listView.isItemChecked(i))
            {
                Base.coffeeList.remove(listAdapter.getItem(i));
            }
        }
        actionMode.finish();
        listAdapter.notifyDataSetChanged();
    }

    @Override
    public void onDestroyActionMode(ActionMode actionMode)
    {}

    @Override
    public void onItemCheckedStateChanged(ActionMode actionMode, int position, long id, boolean checked)
    {}
    /* ************ MultiChoiceModeListener methods (end) *********** */
}</code></pre>

          </div>
        
          <div class="ui tab segment lab" data-tab="Exercises">
            <h1>Exercises</h1>
<h2>Solution</h2>
<p>This is a solution to the lab:</p>
<ul>
<li><a href="archives/CoffeeMate.2.0.Solution.zip">CoffeeMate.2.0.Solution</a></li>
</ul>
<h2>Exercise</h2>
<p>In this lab you have experimented with Custom Adapters &amp; Fragments:</p>
<ul>
<li>Experiment with modifying the custom layout of your Coffee Row in our List</li>
</ul>

          </div>
        
      </div>
    </div>
  </div>



  <script>
    $(document).on('keydown', function(e) {
  e = e || window.event;
  var nextTab;
  switch (e.which || e.keyCode) {
    case 37: // left
      nextTab = $('.tab-menu a[data-tab].active').prev('a[data-tab]');
      if (!nextTab.length) nextTab = $('.tab-menu a[data-tab]').last();
      nextTab.click();
      $('.pusher').focus();
      break;

    case 39: // right
      nextTab = $('.tab-menu a[data-tab].active').next('a[data-tab]');
      if (!nextTab.length) nextTab = $('.tab-menu a[data-tab]').first();
      nextTab.click();
      $('.pusher').focus();
      break;
  }
});

    $(document).ready(function() {
  $('img').addClass('ui image');

  $('.ui.embed').embed();

  const $images = $('.lab img');
  jQuery.each($images, function(i) {
    if ($images[i].alt.length > 0) {
      const divImg = $(document.createElement('div')).addClass(
        'ui basic segment',
      );
      $($images[i]).wrap(divImg);
      const divLabel = $(document.createElement('div')).addClass(
        'ui blue ribbon label',
      );
      divLabel.append($images[i].alt);
      $(divLabel).insertBefore($images[i]);
    }
  });

  $('.ui.menu .item').tab({
    history: true,
    historyType: 'hash',
  });

  $('.popup').popup();

  $('.ui.sidebar')
    .sidebar({ context: $('.pushable') })
    .sidebar('setting', 'transition', 'slide out')
    .sidebar('attach events', '#toc');
});

  </script>



  <div class="ui bottom fixed borderless right menu">
    <div class="ui right small menu">
      <div class="ui tiny basic message segment">
         Powered by <a href="https://github.com/edeleastar/tutors-ts">tutors-ts.</a> 
      </div>
    </div>
  </div>

  </body>

</html>